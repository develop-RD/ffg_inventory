{% extends "base.html" %}

{% block title %}Профиль {{ viewed_user.username }}{% endblock %}

{% block content %}
<div class="profile-container">
    <h1>Профиль {{ viewed_user.username }}</h1>
    
    {% if is_owner %}
    <div class="profile-actions">
        <a href="{{ url_for('upload', item_type='head') }}" class="btn">Добавить предмет</a>
    </div>
    {% endif %}
    <div class="profile-nav">
        <a href="{{ url_for('user_list') }}" class="btn back-btn">← Все пользователи</a>
        {% if is_owner %}
            <a href="{{ url_for('upload', item_type='head') }}" class="btn">Добавить предмет</a>
        {% endif %}
    </div>
    <div class="inventory-grid">
        <!-- Голова -->
        <div class="inventory-cell head-cell">
            <div class="cell-label">Голова</div>
            {% if inventory.head %}
                <div class="item-container">
                    <img src="{{ url_for('static', filename='uploads/' + inventory.head.image_path) }}" 
                         alt="Голова"
                         data-description="{{ inventory.head.description }}"
                         data-pros="{{ inventory.head.pros }}"
                         data-cons="{{ inventory.head.cons }}"
                         data-rating="{{ inventory.head.rating }}">
                    
                    {% if is_owner %}
                    <div class="item-controls">
                        <a href="{{ url_for('upload', item_type='head') }}" class="edit-btn" title="Редактировать">✏️</a>
                        <form action="{{ url_for('delete_item', item_type='head') }}" method="POST" class="delete-form">
                            <button type="submit" class="delete-btn" title="Удалить" onclick="return confirm('Удалить этот предмет?')">×</button>
                        </form>
                    </div>
                    {% endif %}
                    
                    <div class="item-tooltip"></div>
                </div>
            {% else %}
                {% if is_owner %}
                    <a href="{{ url_for('upload', item_type='head') }}" class="add-item">+</a>
                {% else %}
                    <div class="empty-slot">Нет предмета</div>
                {% endif %}
            {% endif %}
        </div>

        <!-- Туловище -->
        <div class="inventory-cell torso-cell">
            <div class="cell-label">Туловище</div>
            {% if inventory.torso %}
                <div class="item-container">
                    <img src="{{ url_for('static', filename='uploads/' + inventory.torso.image_path) }}" 
                         alt="Туловище"
                         data-description="{{ inventory.torso.description }}"
                         data-pros="{{ inventory.torso.pros }}"
                         data-cons="{{ inventory.torso.cons }}"
                         data-rating="{{ inventory.torso.rating }}">
                    
                    {% if is_owner %}
                    <div class="item-controls">
                        <a href="{{ url_for('upload', item_type='torso') }}" class="edit-btn" title="Редактировать">✏️</a>
                        <form action="{{ url_for('delete_item', item_type='torso') }}" method="POST" class="delete-form">
                            <button type="submit" class="delete-btn" title="Удалить" onclick="return confirm('Удалить этот предмет?')">×</button>
                        </form>
                    </div>
                    {% endif %}
                    
                    <div class="item-tooltip"></div>
                </div>
            {% else %}
                {% if is_owner %}
                    <a href="{{ url_for('upload', item_type='torso') }}" class="add-item">+</a>
                {% else %}
                    <div class="empty-slot">Нет предмета</div>
                {% endif %}
            {% endif %}
        </div>

        <!-- Руки -->
        <div class="inventory-cell gloves-cell">
            <div class="cell-label">Руки</div>
            {% if inventory.gloves %}
                <div class="item-container">
                    <img src="{{ url_for('static', filename='uploads/' + inventory.gloves.image_path) }}" 
                         alt="Перчатки"
                         data-description="{{ inventory.gloves.description }}"
                         data-pros="{{ inventory.gloves.pros }}"
                         data-cons="{{ inventory.gloves.cons }}"
                         data-rating="{{ inventory.gloves.rating }}">
                    
                    {% if is_owner %}
                    <div class="item-controls">
                        <a href="{{ url_for('upload', item_type='gloves') }}" class="edit-btn" title="Редактировать">✏️</a>
                        <form action="{{ url_for('delete_item', item_type='gloves') }}" method="POST" class="delete-form">
                            <button type="submit" class="delete-btn" title="Удалить" onclick="return confirm('Удалить этот предмет?')">×</button>
                        </form>
                    </div>
                    {% endif %}
                    
                    <div class="item-tooltip"></div>
                </div>
            {% else %}
                {% if is_owner %}
                    <a href="{{ url_for('upload', item_type='gloves') }}" class="add-item">+</a>
                {% else %}
                    <div class="empty-slot">Нет предмета</div>
                {% endif %}
            {% endif %}
        </div>

        <!-- Ноги -->
        <div class="inventory-cell pants-cell">
            <div class="cell-label">Ноги</div>
            {% if inventory.pants %}
                <div class="item-container">
                    <img src="{{ url_for('static', filename='uploads/' + inventory.pants.image_path) }}" 
                         alt="Штаны"
                         data-description="{{ inventory.pants.description }}"
                         data-pros="{{ inventory.pants.pros }}"
                         data-cons="{{ inventory.pants.cons }}"
                         data-rating="{{ inventory.pants.rating }}">
                    
                    {% if is_owner %}
                    <div class="item-controls">
                        <a href="{{ url_for('upload', item_type='pants') }}" class="edit-btn" title="Редактировать">✏️</a>
                        <form action="{{ url_for('delete_item', item_type='pants') }}" method="POST" class="delete-form">
                            <button type="submit" class="delete-btn" title="Удалить" onclick="return confirm('Удалить этот предмет?')">×</button>
                        </form>
                    </div>
                    {% endif %}
                    
                    <div class="item-tooltip"></div>
                </div>
            {% else %}
                {% if is_owner %}
                    <a href="{{ url_for('upload', item_type='pants') }}" class="add-item">+</a>
                {% else %}
                    <div class="empty-slot">Нет предмета</div>
                {% endif %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}
